!function(e){var t=/.*\/204\.(min\.)?js(\?.*)?$/,n=4e3,o=function(t){var n=[];for(var o in t)n.push("string"!=typeof t[o]&&e.JSON?o+"="+encodeURIComponent(e.JSON.stringify(t[o])):o+"="+encodeURIComponent(t[o].toString()));return e.JSON||n.push("_noJSON_=true"),n.join("&")},i=function(t,n,o){var i=document.createElement("iframe"),r=(new Date).getTime().toString();document.body.appendChild(i),i.style.display="none",i.name=r,i.contentWindow.name=r;var s=document.createElement("div");s.style.display="none";var a=document.createElement("form");a.target=r,a.action=t,a.method="POST",s.appendChild(a);var c;for(var p in n)c=document.createElement("input"),c.type="hidden",c.name=p,c.value="string"!=typeof n[p]&&e.JSON?e.JSON.stringify(n[p]):n[p].toString(),a.appendChild(c);document.body.appendChild(s),i.onload=i.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(i.onreadystatechange=i.onload=null,i.parentNode.removeChild(i),a.parentNode.removeChild(a),o&&"function"==typeof o&&o())},a.submit()},r=function(e,t,n,o){var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=e+"?"+n,r.onload=r.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(r.onreadystatechange=r.onload=null,r.parentNode.removeChild(r),o&&"function"==typeof o&&o())},r.onerror=function(){i(e,t,o)},document.getElementsByTagName("head")[0].appendChild(r)},s=function(e,t,s){var a=o(t);a.length<n?r(e,t,a,s):i(e,t,s)},a=function(e){return e},c={set:function(e,t,n){if(n=n||{},(null===t||void 0===t)&&(n.days=-1),"number"==typeof n.days){var o=n.days,i=new Date;i.setDate(i.getDate()+o),n.expires=i}n.path||(n.path="/");var r=n.raw?a:encodeURIComponent,s=r(e)+"="+r(String(t));return s+="; path="+n.path,n.expires&&(s+="; expires="+n.expires.toUTCString()),n.domain&&(s+="; domain="+n.domain),n.secure&&(s+="; secure"),document.cookie=s,s},setOnce:function(e,t,n){var o=c.get(e,n);return null===o&&(c.set(e,t,n),o=t),o},get:function(e,t){t=t||{};for(var n,o=t.raw?a:decodeURIComponent,i=document.cookie.split("; "),r=0;i[r];r++)if(n=i[r].split("="),o(n[0])===e)return o(n[1]||"");return null},remove:function(e,t){t=t||{},t.days=-1,c.set(e,null,t)}},p=function(){return(1e10*Math.random()).toFixed()+"-"+(new Date).getTime()},d=function(e,t){for(var n=e.length-1;n>=0;n--)c.remove(e[n],t)},h=function(e){e.options.session=e.session();var t=e.options.initialReferrerTracker,n={domain:e.options.domain,days:365};e.options.initialReferrer=c.setOnce(t,e.options.from,n)},u=function(){for(var n=e.document.scripts||document.getElementsByTagName("script"),o=n.length,i=e.document.referrer,r=e.location.host.split(".");r.length>2;)r.shift();this.options={user:null,version:null,session:null,client:"204",from:i,domain:"."+r.join("."),currentURL:e.location.href,tracker:"__204u",initialReferrerTracker:"__204r",beacon:"https://eventing.coursera.org/info"};for(var s=0;o>s;s++)if(t.test(n[s].src)){var a=/^.+\?(.*)$/.exec(n[s].src);if(a)for(var c=a[1].split("&"),p=0;p<c.length;p++){var d=c[p].split("=");/client|user|version|tracker|beacon/.test(d[0])&&(this.options[d[0]]=decodeURIComponent(d[1]))}break}h(this)};u.prototype.session=function(e){var t={domain:this.options.domain,days:365},n=c.get(this.options.tracker,t);return(!n||e)&&(n=e?e:p(),c.set(this.options.tracker,n,t)),n},u.prototype.push=function(e){if("object"==typeof e)if(Array.isArray&&Array.isArray(e)||e.constructor==Array)switch(e[0]){case"send":this.send(e[1],e[2]);break;case"tracker":this.options.tracker=e[1],this.options.session=this.session();break;case"session":this.session=this.session(e[1]);break;case"post":this.send(e[1],e[2],!0);break;case"domain":var t=e[1];t!=this.options.domain&&(d([this.options.tracker,this.options.initialReferrerTracker],{domain:this.options.domain}),this.options.domain=t,h(this));break;default:this.options[e[0]]=e[1]}else this.send(e);return this},u.prototype.send=function(t,n,o){return t="string"==typeof t?{key:t}:t||{},e.location.href!=this.options.currentURL&&(this.options.from=this.options.currentURL,this.options.currentURL=e.location.href),this.options.user&&(t.user=this.options.user),this.options.version&&(t.version=this.options.version),this.options.from&&(t.from=this.options.from),this.options.initialReferrer&&(t.initialReferrer=this.options.initialReferrer),t.session=this.options.session,t.client=this.options.client,t.url=e.location.href,t.time=(new Date).getTime(),e.screen&&(t.screen={height:e.screen.height,width:e.screen.width}),o?i(this.options.beacon,t,n):s(this.options.beacon,t,n),this},u.prototype.batch=function(e){for(;e.length;)this.push(e.shift());return this};var f=new u;e._204&&"object"==typeof e._204&&e._204.constructor==Array&&f.batch(e._204),e._204=f,"function"==typeof define&&define.amd&&define("_204",[],function(){return f})}(window);